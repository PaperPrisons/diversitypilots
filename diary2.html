<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" />
    <link rel="icon" type="image/png" href="images/favicon.png" />
    <title>Diary</title>
    <link rel="stylesheet" href="./dist/output.css" />
    <style>
      #quoteDiv {
        position: relative;
        /*background-color: #2e2e2e;*/
        width: 90%;
        min-height: 500px;
        text-align: center;
        vertical-align: middle;
        display: flex;
        border-top: 2.25px solid rgb(0 0 0 / 3%);
        box-shadow: 0 2.8px 2.2px rgb(0 0 0 / 3%), 0 6.7px 5.3px rgb(0 0 0 / 5%),
          0 12.5px 10px rgb(0 0 0 / 6%), 0 22.3px 17.9px rgb(0 0 0 / 7%),
          0 41.8px 33.4px rgb(0 0 0 / 9%), 0 10px 10px rgb(0 0 0 / 12%);
        /*box-shadow:*/
        /*0 2.8px 2.2px rgba(0, 0, 0, 0.034),*/
        /*0 6.7px 5.3px rgba(0, 0, 0, 0.048),*/
        /*0 12.5px 10px rgba(0, 0, 0, 0.06),*/
        /*0 22.3px 17.9px rgba(0, 0, 0, 0.072),*/
        /*0 41.8px 33.4px rgba(0, 0, 0, 0.086),*/
        /*0 100px 80px rgba(0, 0, 0, 0.12);*/
      }

      #blackDiv {
        background-color: #2e2e2e;
        width: 100%;
        min-height: 600px;
        text-align: center;
        vertical-align: middle;
        display: flex;
      }

      #whiteDiv {
        background-color: #fff;
        width: 100%;
        min-height: 600px;
        text-align: center;
        vertical-align: middle;
        display: none;
      }

      .quote {
        opacity: 0;
        display: none;
        margin: auto;
        width: 80%;
        font-size: 24px;
        color: #fafafa;
      }

      .bQuote {
        opacity: 0;
        display: none;
        margin: auto;
        width: 80%;
        font-size: 24px;
        color: #2e2e2e;
      }

      .userinfo {
        font-size: 24px;
      }

      .visible {
        display: inline-block;
        -webkit-animation: fadein ease-in 10s normal forwards; /* Safari, Chrome and Opera > 12.1 */
        -moz-animation: fadein ease-in 10s normal forwards; /* Firefox < 16 */
        -ms-animation: fadein ease-in 10s normal forwards; /* Internet Explorer */
        -o-animation: fadein ease-in 10s normal forwards; /* Opera < 12.1 */
        animation: fadein ease-in 10s normal forwards;
      }

      @keyframes fadein {
        0% {
          opacity: 0;
        }
        50%,
        100% {
          opacity: 1;
        }
      }

      div#quoteDiv #ppLogo {
        float: right;
        width: 7%;
        position: relative;
      }
      #bottom {
        position: absolute;
        bottom: 10%;
        right: 10%;
        height: 15%;
      }
      #bottom2 {
        position: absolute;
        bottom: 5%;
        right: 10%;
        color: white;
        font-size: 12;
      }

      @media screen and (max-width: 845px) {
        #blackDiv,
        #whiteDiv {
          vertical-align: top;
        }
        .quote {
          font-size: 18px;
        }

        .bQuote {
          font-size: 18px;
        }
        .userinfo {
          font-size: 18px;
        }
        #bottom {
          height: 8%;
        }
        #bottom2 {
          font-size: 10;
        }
      }

      /*switch styles*/

      div.btn-container {
        display: table-cell;
        vertical-align: middle;
        text-align: center;
        width: 10%;
        margin: auto;
      }

      label {
        font-size: 13px;
        /*color: #424242;*/
        font-weight: 500;
      }

      .btn-color-mode-switch {
        display: inline-block;
        margin: 0px;
        position: relative;
      }

      .btn-color-mode-switch > label.btn-color-mode-switch-inner {
        margin: 0px;
        width: 200px;
        height: 50px;
        background: #151515;
        color: #fff;
        border-radius: 26px;
        overflow: hidden;
        position: relative;
        transition: all 0.3s ease;
        /*box-shadow: 0px 0px 8px 0px rgba(17, 17, 17, 0.34) inset;*/
        display: block;
      }

      .btn-color-mode-switch > label.btn-color-mode-switch-inner:before {
        content: attr(data-on);
        position: absolute;
        font-size: 12px;
        font-weight: 500;
        top: 7px;
        left: 95px;
      }

      .btn-color-mode-switch > label.btn-color-mode-switch-inner:after {
        content: attr(data-off);
        width: 105px;
        height: 45px;
        background: #6458ab; /*#9c3fc6;*/
        border-radius: 26px;
        position: absolute;
        left: 2px;
        top: 2px;
        text-align: center;
        transition: all 0.3s ease;
        box-shadow: 0px 0px 6px -2px #111;
        padding: 5px 0px;
      }

      /*.btn-color-mode-switch > .alert{
                display: none;
                background: #FF9800;
                border: none;
                color: #fff;
            }*/

      .btn-color-mode-switch input[type="checkbox"] {
        cursor: pointer;
        width: 50px;
        height: 25px;
        opacity: 0;
        position: absolute;
        top: 0;
        z-index: 1;
        margin: 0px;
      }

      /* .btn-color-mode-switch input[type="checkbox"]:checked + label.btn-color-mode-switch-inner{
                background: #E0E0E0;
                color: black;
            }

            .btn-color-mode-switch input[type="checkbox"]:checked + label.btn-color-mode-switch-inner:after{
                content: attr(data-on);
                left: 94px;
                background: #6458ab;
                color: #fff;
            }

            .btn-color-mode-switch input[type="checkbox"]:checked + label.btn-color-mode-switch-inner:before{
                content: attr(data-off);
                right: 105;
                left: 5px;
            }*/

      .btn-color-mode-switch
        input[type="checkbox"]:checked
        + label.btn-color-mode-switch-inner,
      .btn-color-mode-switch
        input[type="checkbox"]:checked
        + span.btn-color-mode-switch-inner {
        background: #e0e0e0;
        color: black;
      }
      .btn-color-mode-switch
        input[type="checkbox"]:checked
        + label.btn-color-mode-switch-inner:after {
        content: attr(data-on);
        left: 94px;
        background: #6458ab;
        color: #fff;
      }

      .btn-color-mode-switch
        input[type="checkbox"]:checked
        + span.btn-color-mode-switch-inner:after {
        content: attr(data-on);
        left: 94px;
        background: #6458ab;
        color: #fff;
      }

      .btn-color-mode-switch
        input[type="checkbox"]:checked
        + label.btn-color-mode-switch-inner:before,
      .btn-color-mode-switch
        input[type="checkbox"]:checked
        + span.btn-color-mode-switch-inner:before {
        content: attr(data-off);
        right: 105;
        left: 5px;
      }

      .btn-color-mode-switch
        input[type="checkbox"]:checked
        + label.btn-color-mode-switch-inner {
        /*background: #66BB6A; */
        /*color: #fff;*/
      }

      .btn-color-mode-switch input[type="checkbox"]:checked ~ .alert {
        display: block;
      }
      div#pause {
        position: absolute;
        bottom: 10%;
        left: 10%;
        background-color: grey;
        border-radius: 25%;
        width: 4rem;
        height: 2rem;
      }
      div#pause p:hover {
        cursor: pointer;
      }

      .btn-color-mode-switch > span.btn-color-mode-switch-inner {
        margin: 0px;
        width: 200px;
        height: 50px;
        background: #151515;
        color: #fff;
        border-radius: 26px;
        overflow: hidden;
        position: relative;
        transition: all 0.3s ease;
        display: block;
      }

      .btn-color-mode-switch > span.btn-color-mode-switch-inner:before {
        content: attr(data-on);
        position: absolute;
        font-size: 12px;
        font-weight: 500;
        top: 7px;
        left: 95px;
      }

      .btn-color-mode-switch > span.btn-color-mode-switch-inner:after {
        content: attr(data-off);
        width: 105px;
        height: 45px;
        background: #6458ab;
        border-radius: 26px;
        position: absolute;
        left: 2px;
        top: 2px;
        text-align: center;
        transition: all 0.3s ease;
        box-shadow: 0px 0px 6px -2px #111;
        padding: 5px 0px;
      }
    </style>

    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"></script>

    <script>
      $(document).ready(function () {
        const urlParams = new URLSearchParams(window.location.search);
        const isRja = urlParams.get('source') === 'rja' || window.location.hostname === 'rja.paperprisons.org';

        // if (isRja) {
        //   $(".btn-container").hide();
        //   $("#diaryTitle").text("Paper Prisons RJA Diary");
        //   $("#description").text("We asked people what the RJA means to them and here is what they said:");
        //   $("#subscribeText").hide();
        //   $("#diaryLink").text("https://paperprisons.org/diary.html");
        // }

        $("#color_mode").on("change", function () {
          colorModePreview(this);
        });
      });
      let paused = false;

      $(document).ready(function () {
        $("#color_mode").on("change", function () {
          colorModePreview(this);
        });
      });

      function colorModePreview(ele) {
        if ($(ele).prop("checked") == true) {
          document.getElementById("description").innerHTML =
            "We asked people how getting an expungement has changed their lives.";
          document.getElementById("blackDiv").style.display = "none";
          document.getElementById("whiteDiv").style.display = "flex";
          document.getElementById("bottom").src = "images/logo.png";
          document.getElementById("bottom2").style.color = "black";
        } else if ($(ele).prop("checked") == false) {
          document.getElementById("description").innerHTML =
            "We asked people stuck in Paper Prisons how having a record has impacted their lives.";
          document.getElementById("blackDiv").style.display = "flex";
          document.getElementById("whiteDiv").style.display = "none";
          document.getElementById("bottom").src = "images/LogoWhiteWords.png";
          document.getElementById("bottom2").style.color = "white";
        }
      }
    </script>

    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.1.0/papaparse.min.js"></script>

    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const isRja = urlParams.get('source') === 'rja' || window.location.hostname === 'rja.paperprisons.org';

      Papa.parse(
        isRja 
          ? "https://docs.google.com/spreadsheets/d/e/2PACX-1vT1VWccDMphZgAKchZDFmkud5vxCICcM34ZbyiUKco98MOyR3aZVzQFZRQNV9ywD4XDowMfdZ_r52D8/pub?gid=0&single=true&output=csv"
          : "https://docs.google.com/spreadsheets/d/1huSXlLkqCvake3cRx468G1Soi32RAc5fL4DBL8YA7Us/pub?output=csv",
        {
          download: true,
          header: true,
          complete: function showInfo(results) {
            var quotesData = results.data;
            const quoteElement = document.getElementById("blackDiv");
            var i;
            for (i = 0; i < quotesData.length; i++) {
              let pElement = document.createElement("p");
              pElement.classList.add("quote");
              pElement.innerHTML =
                quotesData[i].quote +
                "<br><br>" +
                "- <span class='userinfo'>" +
                quotesData[i].name.trim();
              if (quotesData[i].ethnicity.trim()) {
                pElement.innerHTML += ", " + quotesData[i].ethnicity.trim();
              }
              if (quotesData[i].conviction_years_ago.trim()) {
                pElement.innerHTML +=
                  ", convicted " +
                  quotesData[i].conviction_years_ago.trim() +
                  " years ago";
              }
              pElement.innerHTML += "</span>";
              quoteElement.appendChild(pElement);
            }
            showNext(0, document.querySelectorAll(".quote"));
          },
        }
      );
      function showNext(index, pList) {
        pList[index].classList.add("visible");
        setTimeout(() => {
          pList[index].classList.remove("visible");
          if (!paused) index++;
          showNext(index % pList.length, pList);
        }, 10000);
      }
    </script>

    <script>
      Papa.parse(
        "https://docs.google.com/spreadsheets/d/1Y9NCo5-7GzVH4r6dshxzhDegMuDcGIdrMiEyga0yDRQ/pub?output=csv",
        {
          download: true,
          header: true,
          complete: function showInfo(results) {
            var quotesData = results.data;
            // alert('Successfully processed!');
            // console.log(data);
            const quoteElement = document.getElementById("whiteDiv");
            var i;
            for (i = 0; i < quotesData.length; i++) {
              let pElement = document.createElement("p");
              pElement.classList.add("bQuote");
              pElement.innerHTML =
                quotesData[i].quote +
                "<br><br>" +
                "- <span class='userinfo'>" +
                quotesData[i].name.trim(); //+ ", " + quotesData[i].ethnicity + ", charged " + quotesData[i].conviction_years_ago + " years ago</span>";
              if (quotesData[i].ethnicity.trim()) {
                pElement.innerHTML += ", " + quotesData[i].ethnicity.trim();
              }
              if (quotesData[i].conviction_years_ago.trim()) {
                pElement.innerHTML +=
                  ", convicted " +
                  quotesData[i].conviction_years_ago.trim() +
                  " years ago";
              }
              pElement.innerHTM += "</span>";
              // <br/><img id='ppLogo' src='images/LogoWhiteWords.png' alt='@PaperPrisons'/>";
              //console.log(quoteElement);
              quoteElement.appendChild(pElement);
            }
            showNext(0, document.querySelectorAll(".bQuote"));
          },
        }
      );
      function showNext(index, pList) {
        pList[index].classList.add("visible");
        setTimeout(() => {
          pList[index].classList.remove("visible");
          if (!paused) index++;
          showNext(index % pList.length, pList);
        }, 10000);
      }
    </script>
  </head>
  <body class="bg-white text-gray-900">

    <!--#include file="includes/header.html"-->
    
    <!-- NAVBAR -->
    <div id="navbar"></div>
    
    <article class="container mx-auto py-12 px-4" itemid="#" i>
      <div class="w-full md:w-2/3 mx-auto text-center mb-12">
        <h1
          id="diaryTitle"
          class="sm:text-4xl text-3xl mb-4 font-medium text-gray-800 leading-tight"
          itemprop="headline"
          title="Paper Prisons Story">
          Paper Prisons Diary
        </h1>
        <div class="btn-container">
          <label class="switch btn-color-mode-switch" for="color_mode">
            <input
              type="checkbox"
              name="color_mode"
              id="color_mode"
              value="1" />
            <span
              class="btn-color-mode-switch-inner"
              data-on="Impact of Expungement"
              data-off="Impact of Having a Record"></span>
          </label>
        </div>
        <!-- <p id="description" class="mt-4 text-black text-lg sm:text-md">
          We asked people with clearable criminal records how having a criminal
          record has impacted their lives.
        </p>
        <p class="mt-4 text-black text-lg sm:text-md">
          Here is what they said:
        </p> -->
      </div>
      <div id="quoteDiv" class="mx-auto">
        <div id="blackDiv"></div>
        <div id="whiteDiv"></div>
        <div id="pause">
          <p type="button" name="button" onclick="handlePause()">Pause</p>
        </div>
        <img id="bottom" src="images/LogoWhiteWords.png" alt="@PaperPrisons" />
        <span id="bottom2">https://paperprisons.org/diary.html</span>
      </div>
      <!--<div class="w-full md:w-2/3 mx-auto text-center mb-12" style="margin-top: 64px">-->
      <!--<p>These experimental testimonies are shown for demonstration purposes only</p>-->
      <!--<p>Please contact ju@paperprisons.org with your feedback.</p>-->
      <!--</div>-->
      <div class="w-full md:w-2/3 mx-auto text-center mb-12">
        <!-- <p id="subscribeText" class="mt-4 text-black text-lg sm:text-md italic">
          These are some of the nearly 1,000 responses we got to this question,
          as well as many others, all of the subject of a Paper Prisons paper.
          Subscribe below for updates.
        </p> -->
        <!-- <p class="mt-4 text-black text-lg sm:text-md italic">
          This tool was created by Navid Shaghagi, Ju Park, Colleen Chien, and
          student assistants. It is maintained by Max Calcoen.
        </p> -->
        <!-- <p class="mt-4 text-black text-lg sm:text-md italic">
          To learn more or to build your own "Diary" tool
          <a href="https://github.com/PaperPrisons/diary-tool">click here</a>
        </p> -->
      </div>
    </article>

    <!--#include file="includes/partners.html"-->

    <section
      style="padding: 0"
      class="text-gray-700 body-font relative showContact">
      <!--#include file="includes/contact.html"-->
      
      <!--#include file="includes/footer.html"-->
      
      <!-- FOOTER -->
      <div id="footer"></div>
    
    </section>

    <script type="text/javascript">
      function handlePause() {
        paused = !paused;
        let out = "Pause";
        if (paused) {
          out = "Play";
        }
        document.getElementById("pause").children[0].innerText = out;
      }
    </script>
  </body>
</html>
